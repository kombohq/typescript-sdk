/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../lib/primitives.js";
import { ClosedEnum } from "../types/enums.js";

/**
 * Status of the assessment.
 *
 * @remarks
 *
 * **Please note the `status` can only be updated to a different value if its current value is `OPEN`.**
 */
export const PutAssessmentOrdersAssessmentOrderIdResultRequestBodyStatus = {
  Completed: "COMPLETED",
  Cancelled: "CANCELLED",
  Open: "OPEN",
} as const;
/**
 * Status of the assessment.
 *
 * @remarks
 *
 * **Please note the `status` can only be updated to a different value if its current value is `OPEN`.**
 */
export type PutAssessmentOrdersAssessmentOrderIdResultRequestBodyStatus =
  ClosedEnum<
    typeof PutAssessmentOrdersAssessmentOrderIdResultRequestBodyStatus
  >;

export type Score = {
  value: number;
  max: number;
};

export const AttributeStatus = {
  Completed: "COMPLETED",
  Cancelled: "CANCELLED",
} as const;
export type AttributeStatus = ClosedEnum<typeof AttributeStatus>;

export type AttributeSubResult = {
  type: "SUB_RESULT";
  id: string;
  label: string;
  score: Score;
  status: AttributeStatus;
};

export type AttributeText = {
  type: "TEXT";
  label: string;
  value: string;
};

export type Attribute = AttributeText | AttributeSubResult;

export type PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment = {
  /**
   * File name of the file you want to upload. We recommend providing something human-readable with a valid file extension (like `Resume.pdf`), as this might be shown in your customer's system.
   */
  name: string;
  /**
   * Content/MIME type of the file (e.g., `application/pdf`).
   *
   * @remarks
   *
   * If you provide `data`, this is required. If you provide `data_url`, this is optional and we'll attempt to use the `Content-Type` header of the response.
   *
   * **Note:** Please validate that the content type you provide is actually meaningful (and not something generic like [`application/octet-stream`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/MIME_types#applicationoctet-stream)). Especially when using object storage (like AWS S3), it's easy to accidentally discard the content types of user-provided files, so make sure to explicitly persist them when processing uploads from your users (see guides for [AWS](https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingMetadata.html#SysMetadata), [Google Cloud](https://cloud.google.com/storage/docs/metadata#content-type), and [Azure](https://learn.microsoft.com/en-us/rest/api/storageservices/put-blob#request-headers-all-blob-types)).
   */
  content_type?: string | undefined;
  /**
   * URL to the file you want to upload that can be accessed without authentication headers. We will download the content immediately when receiving the request, so the URL can be short-lived.
   *
   * @remarks
   *
   * If you're using an object storage provider (like AWS S3), we strongly recommend providing a signed URL for secure access (see guides for [AWS](https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html), [Google Cloud](https://cloud.google.com/storage/docs/access-control/signed-urls), and [Azure](https://learn.microsoft.com/en-us/azure/storage/common/storage-sas-overview)).
   *
   * **Note:** You must provide either this or `data_url`. We recommend `data_url` over `data` for most cases.
   */
  data_url?: string | undefined;
  /**
   * Base64-encoded contents of the file you want to upload.
   *
   * @remarks
   *
   * **Note:** You must provide either this or `data_url`. We recommend `data_url` over `data` for most cases.
   */
  data?: string | undefined;
};

export type PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters =
  {
    /**
     * Value that we will pass through to SmartRecruiters' `scoreLabel` field.
     */
    score_label?: string | undefined;
  };

/**
 * Additional fields that we will pass through to specific ATS systems.
 */
export type PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields =
  {
    smartrecruiters?:
      | PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters
      | undefined;
  };

export type PutAssessmentOrdersAssessmentOrderIdResultRequestBody = {
  /**
   * Status of the assessment.
   *
   * @remarks
   *
   * **Please note the `status` can only be updated to a different value if its current value is `OPEN`.**
   */
  status: PutAssessmentOrdersAssessmentOrderIdResultRequestBodyStatus;
  result_url: string;
  /**
   * YYYY-MM-DDTHH:mm:ss.sssZ
   *
   * @remarks
   *
   * **Please make sure this value is provided when the `status` is of the type `COMPLETED` or `CANCELLED`.**
   */
  completed_at?: Date | undefined;
  score?: number | undefined;
  max_score?: number | undefined;
  /**
   * An array of additional attributes that you would like to submit as a part of the assessment result.
   *
   * @remarks
   *
   * - If an ATS only supports writing text attributes, we will transform non `TEXT` attributes into formatted plain text values.
   */
  attributes?: Array<AttributeText | AttributeSubResult> | undefined;
  /**
   * An array of attachments containing the assessment result.
   */
  attachments?:
    | Array<PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment>
    | undefined;
  /**
   * Additional fields that we will pass through to specific ATS systems.
   */
  remote_fields?:
    | PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields
    | undefined;
};

/** @internal */
export const PutAssessmentOrdersAssessmentOrderIdResultRequestBodyStatus$outboundSchema:
  z.ZodNativeEnum<
    typeof PutAssessmentOrdersAssessmentOrderIdResultRequestBodyStatus
  > = z.nativeEnum(PutAssessmentOrdersAssessmentOrderIdResultRequestBodyStatus);

/** @internal */
export type Score$Outbound = {
  value: number;
  max: number;
};

/** @internal */
export const Score$outboundSchema: z.ZodType<
  Score$Outbound,
  z.ZodTypeDef,
  Score
> = z.object({
  value: z.number(),
  max: z.number(),
});

export function scoreToJSON(score: Score): string {
  return JSON.stringify(Score$outboundSchema.parse(score));
}

/** @internal */
export const AttributeStatus$outboundSchema: z.ZodNativeEnum<
  typeof AttributeStatus
> = z.nativeEnum(AttributeStatus);

/** @internal */
export type AttributeSubResult$Outbound = {
  type: "SUB_RESULT";
  id: string;
  label: string;
  score: Score$Outbound;
  status: string;
};

/** @internal */
export const AttributeSubResult$outboundSchema: z.ZodType<
  AttributeSubResult$Outbound,
  z.ZodTypeDef,
  AttributeSubResult
> = z.object({
  type: z.literal("SUB_RESULT"),
  id: z.string(),
  label: z.string(),
  score: z.lazy(() => Score$outboundSchema),
  status: AttributeStatus$outboundSchema,
});

export function attributeSubResultToJSON(
  attributeSubResult: AttributeSubResult,
): string {
  return JSON.stringify(
    AttributeSubResult$outboundSchema.parse(attributeSubResult),
  );
}

/** @internal */
export type AttributeText$Outbound = {
  type: "TEXT";
  label: string;
  value: string;
};

/** @internal */
export const AttributeText$outboundSchema: z.ZodType<
  AttributeText$Outbound,
  z.ZodTypeDef,
  AttributeText
> = z.object({
  type: z.literal("TEXT"),
  label: z.string(),
  value: z.string(),
});

export function attributeTextToJSON(attributeText: AttributeText): string {
  return JSON.stringify(AttributeText$outboundSchema.parse(attributeText));
}

/** @internal */
export type Attribute$Outbound =
  | AttributeText$Outbound
  | AttributeSubResult$Outbound;

/** @internal */
export const Attribute$outboundSchema: z.ZodType<
  Attribute$Outbound,
  z.ZodTypeDef,
  Attribute
> = z.union([
  z.lazy(() => AttributeText$outboundSchema),
  z.lazy(() => AttributeSubResult$outboundSchema),
]);

export function attributeToJSON(attribute: Attribute): string {
  return JSON.stringify(Attribute$outboundSchema.parse(attribute));
}

/** @internal */
export type PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment$Outbound =
  {
    name: string;
    content_type?: string | undefined;
    data_url?: string | undefined;
    data?: string | undefined;
  };

/** @internal */
export const PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment$outboundSchema:
  z.ZodType<
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment$Outbound,
    z.ZodTypeDef,
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment
  > = z.object({
    name: z.string(),
    content_type: z.string().optional(),
    data_url: z.string().optional(),
    data: z.string().optional(),
  });

export function putAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachmentToJSON(
  putAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment:
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment,
): string {
  return JSON.stringify(
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment$outboundSchema
      .parse(putAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment),
  );
}

/** @internal */
export type PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters$Outbound =
  {
    scoreLabel?: string | undefined;
  };

/** @internal */
export const PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters$outboundSchema:
  z.ZodType<
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters$Outbound,
    z.ZodTypeDef,
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters
  > = z.object({
    score_label: z.string().optional(),
  }).transform((v) => {
    return remap$(v, {
      score_label: "scoreLabel",
    });
  });

export function putAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruitersToJSON(
  putAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters:
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters,
): string {
  return JSON.stringify(
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters$outboundSchema
      .parse(
        putAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters,
      ),
  );
}

/** @internal */
export type PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields$Outbound =
  {
    smartrecruiters?:
      | PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters$Outbound
      | undefined;
  };

/** @internal */
export const PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields$outboundSchema:
  z.ZodType<
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields$Outbound,
    z.ZodTypeDef,
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields
  > = z.object({
    smartrecruiters: z.lazy(() =>
      PutAssessmentOrdersAssessmentOrderIdResultRequestBodySmartrecruiters$outboundSchema
    ).optional(),
  });

export function putAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFieldsToJSON(
  putAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields:
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields,
): string {
  return JSON.stringify(
    PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields$outboundSchema
      .parse(putAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields),
  );
}

/** @internal */
export type PutAssessmentOrdersAssessmentOrderIdResultRequestBody$Outbound = {
  status: string;
  result_url: string;
  completed_at?: string | undefined;
  score?: number | undefined;
  max_score?: number | undefined;
  attributes?:
    | Array<AttributeText$Outbound | AttributeSubResult$Outbound>
    | undefined;
  attachments?:
    | Array<
      PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment$Outbound
    >
    | undefined;
  remote_fields?:
    | PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields$Outbound
    | undefined;
};

/** @internal */
export const PutAssessmentOrdersAssessmentOrderIdResultRequestBody$outboundSchema:
  z.ZodType<
    PutAssessmentOrdersAssessmentOrderIdResultRequestBody$Outbound,
    z.ZodTypeDef,
    PutAssessmentOrdersAssessmentOrderIdResultRequestBody
  > = z.object({
    status:
      PutAssessmentOrdersAssessmentOrderIdResultRequestBodyStatus$outboundSchema,
    result_url: z.string(),
    completed_at: z.date().transform(v => v.toISOString()).optional(),
    score: z.number().optional(),
    max_score: z.number().optional(),
    attributes: z.array(
      z.union([
        z.lazy(() => AttributeText$outboundSchema),
        z.lazy(() => AttributeSubResult$outboundSchema),
      ]),
    ).optional(),
    attachments: z.array(
      z.lazy(() =>
        PutAssessmentOrdersAssessmentOrderIdResultRequestBodyAttachment$outboundSchema
      ),
    ).optional(),
    remote_fields: z.lazy(() =>
      PutAssessmentOrdersAssessmentOrderIdResultRequestBodyRemoteFields$outboundSchema
    ).optional(),
  });

export function putAssessmentOrdersAssessmentOrderIdResultRequestBodyToJSON(
  putAssessmentOrdersAssessmentOrderIdResultRequestBody:
    PutAssessmentOrdersAssessmentOrderIdResultRequestBody,
): string {
  return JSON.stringify(
    PutAssessmentOrdersAssessmentOrderIdResultRequestBody$outboundSchema.parse(
      putAssessmentOrdersAssessmentOrderIdResultRequestBody,
    ),
  );
}
