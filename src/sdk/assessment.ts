/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { assessmentGetOpenOrders } from "../funcs/assessmentGetOpenOrders.js";
import { assessmentGetPackages } from "../funcs/assessmentGetPackages.js";
import { assessmentSetPackages } from "../funcs/assessmentSetPackages.js";
import { assessmentUpdateOrderResult } from "../funcs/assessmentUpdateOrderResult.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as models from "../models/index.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";
import { PageIterator, unwrapResultIterator } from "../types/operations.js";

export class Assessment extends ClientSDK {
  /**
   * Get packages
   *
   * @remarks
   * Get all available assessment and background check packages for an integration.
   *
   * This is mainly intended for debugging. As you always need to submit the full list of available packages when using ["set packages"](/assessment/v1/put-packages), there shouldn't ever be a need to call this endpoint in production.
   */
  async getPackages(
    request?: operations.GetAssessmentPackagesRequest | undefined,
    options?: RequestOptions,
  ): Promise<models.GetAssessmentPackagesPositiveResponse> {
    return unwrapAsync(assessmentGetPackages(
      this,
      request,
      options,
    ));
  }

  /**
   * Set packages
   *
   * @remarks
   * Set packages
   *
   * Replaces the list of available assessment and or background check packages.
   *
   * Packages that have been previously submitted through this endpoint but aren't included again will be marked as deleted.
   *
   * ### Example Request Body
   *
   * ```json
   * {
   *   "packages": [
   *     {
   *       "id": "1001",
   *       "type": "SKILLS_TEST",
   *       "name": "TypeScript",
   *       "description": "TypeScript coding skills assessments"
   *     },
   *     {
   *       "id": "1002",
   *       "type": "VIDEO_INTERVIEW",
   *       "name": "Video Interview",
   *       "description": "Video interview to assess communication skills"
   *     }
   *   ]
   * }
   * ```
   */
  async setPackages(
    request: models.PutAssessmentPackagesRequestBody,
    options?: RequestOptions,
  ): Promise<models.PutAssessmentPackagesPositiveResponse> {
    return unwrapAsync(assessmentSetPackages(
      this,
      request,
      options,
    ));
  }

  /**
   * Get open orders
   *
   * @remarks
   * Get all open assessment and background check orders of an integration.
   */
  async getOpenOrders(
    request?: operations.GetAssessmentOrdersOpenRequest | undefined,
    options?: RequestOptions,
  ): Promise<
    PageIterator<operations.GetAssessmentOrdersOpenResponse, { cursor: string }>
  > {
    return unwrapResultIterator(assessmentGetOpenOrders(
      this,
      request,
      options,
    ));
  }

  /**
   * Update order result
   *
   * @remarks
   * Updates an assessment or a background check order result.
   *
   * ### Example Request Body
   *
   * ```json
   * {
   *   "status": "COMPLETED",
   *   "score": 90,
   *   "max_score": 100,
   *   "result_url": "https://example.com",
   *   "completed_at": "2023-04-04T00:00:00.000Z",
   *   "attributes": [
   *     {
   *       "type": "TEXT",
   *       "label": "Role fit",
   *       "value": "Excellent"
   *     },
   *     {
   *       "type": "SUB_RESULT",
   *       "id": "<YOUR_INTERNAL_ID_OF_THE_TEST>",
   *       "label": "Personality test",
   *       "score": {
   *         "value": 97,
   *         "max": 100
   *       },
   *       "status": "COMPLETED"
   *     }
   *   ],
   *   "attachments": [
   *     {
   *       "name": "Assessment Report.pdf",
   *       "data": "SGkgdGhlcmUsIEtvbWJvIGlzIGN1cnJlbnRseSBoaXJpbmcgZW5naW5lZXJzIHRoYXQgbG92ZSB0byB3b3JrIG9uIGRldmVsb3BlciBwcm9kdWN0cy4=",
   *       "content_type": "application/pdf"
   *     }
   *   ]
   * }
   * ```
   */
  async updateOrderResult(
    request: operations.PutAssessmentOrdersAssessmentOrderIdResultRequest,
    options?: RequestOptions,
  ): Promise<
    models.PutAssessmentOrdersAssessmentOrderIdResultPositiveResponse
  > {
    return unwrapAsync(assessmentUpdateOrderResult(
      this,
      request,
      options,
    ));
  }
}
