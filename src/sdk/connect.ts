/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { connectCreateConnectionLink } from "../funcs/connectCreateConnectionLink.js";
import { connectGetIntegrationByToken } from "../funcs/connectGetIntegrationByToken.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as models from "../models/index.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class Connect extends ClientSDK {
  /**
   * Create connection link
   *
   * @remarks
   * Generate a unique link that allows your user to enter the embedded Kombo Connect flow.
   *
   * > Check out [our full guide](/connect/embedded-flow) for more details about implementing the connection flow into your app.
   *
   * > Kombo will not deduplicate integrations for you that are created with this endpoint. You are responsible for keeping track of integrations in your system and prevent customers from connecting the same tool again. Use the [reconnection link](/v1/post-integrations-integration-id-relink) endpoint if you want a customer to update their credentials.
   *
   * ### Example Request Body
   *
   * ```json
   * {
   *   "end_user_email": "test@example.com",
   *   "end_user_organization_name": "Test Inc.",
   *   "integration_category": "HRIS",
   *   "integration_tool": "personio",
   *   "end_user_origin_id": "123",
   *   "language": "en",
   *   "link_type": "EMBEDDED"
   * }
   * ```
   */
  async createConnectionLink(
    request: models.PostConnectCreateLinkRequestBody,
    options?: RequestOptions,
  ): Promise<models.PostConnectCreateLinkPositiveResponse> {
    return unwrapAsync(connectCreateConnectionLink(
      this,
      request,
      options,
    ));
  }

  /**
   * Get integration by token
   *
   * @remarks
   * Use this endpoint with the token you get from the connection flow to retrieve information about the created integration.
   *
   *   It works in a similar way as the OAuth2 code flow to securely retrieve information and connect the integration to your user.
   *
   * > Check out [our full guide](/connect/embedded-flow) for more details about implementing the connection flow into your app.
   *
   * This endpoint is used to ensure users can't trick your system connecting their
   * account in your system to another customers integration. You don't get the integration ID
   * from the `showKomboConnect(link)` function but only the short lived token used
   * for this endpoint so that users can't send you arbitrary data that you would put
   * into your system.
   */
  async getIntegrationByToken(
    request: operations.GetConnectIntegrationByTokenTokenRequest,
    options?: RequestOptions,
  ): Promise<models.GetConnectIntegrationByTokenTokenPositiveResponse> {
    return unwrapAsync(connectGetIntegrationByToken(
      this,
      request,
      options,
    ));
  }
}
